DROP TABLE IF EXISTS voters CASCADE;
DROP TABLE IF EXISTS polls CASCADE;
DROP TABLE IF EXISTS choices CASCADE;
DROP TABLE IF EXISTS votes CASCADE;

CREATE TABLE polls (
  id SERIAL PRIMARY KEY NOT NULL,
  owner_name VARCHAR(255) NOT NULL,
  owner_email VARCHAR(255) NOT NULL,
  admin_link VARCHAR(255),
  submission_link VARCHAR(255),
  question VARCHAR(8000)
);

CREATE TABLE voters (
  id SERIAL PRIMARY KEY NOT NULL,
  name VARCHAR(255) NOT NULL,
  polls_id INTEGER NOT NULL REFERENCES polls(id)
);

CREATE TABLE choices (
  id SERIAL PRIMARY KEY NOT NULL,
  poll_id INTEGER REFERENCES polls(id),
  description VARCHAR(8000),
  title VARCHAR(255)

);
CREATE TABLE votes (
  id SERIAL PRIMARY KEY NOT NULL,
  voter_id INTEGER NOT NULL REFERENCES voters(id),
  choice_id INTEGER NOT NULL REFERENCES choices(id),
  rank INTEGER
);
